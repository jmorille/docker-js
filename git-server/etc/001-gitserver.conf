<VirtualHost *:80>
   ServerName GF219896.groupe.generali.fr

   DocumentRoot /var/www/git

   SetEnv GIT_PROJECT_ROOT /var/www/git
   SetEnv GIT_HTTP_EXPORT_ALL
   ScriptAlias /git/ /usr/lib/git-core/git-http-backend/

   # To serve multiple repositories from different gitnamespaces(7) in a single repository:
   # SetEnvIf Request_URI "^/git/([^/]*)" GIT_NAMESPACE=$1
   # ScriptAliasMatch ^/git/[^/]*(.*) /usr/lib/git-core/git-http-backend/storage.git$1


   RewriteCond %{QUERY_STRING} service=git-receive-pack [OR]
   RewriteCond %{REQUEST_URI} /git-receive-pack$
   RewriteRule ^/git/ - [E=AUTHREQUIRED:yes]

   # Enable CGI on the gitweb directory

   <Directory /usr/share/gitweb>
     Options +FollowSymLinks +ExecCGI
     AddHandler cgi-script .cgi
     DirectoryIndex gitweb.cgi
   </Directory>


  <LocationMatch "^/git/"> 
     Order Deny,Allow
	 Deny from env=AUTHREQUIRED

     AuthType Basic
	 AuthName "Git Access"
#	 Require group committers
	 Satisfy Any
  </LocationMatch>

</VirtualHost>
